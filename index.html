<!doctype html>
<html lang="en">

	<head>
		<meta charset="utf-8">

		<title>Just Enough Openstack for Docker</title>

		<meta name="description" content="Just Enough Openstack for Docker">
		<meta name="author" content="Paul Czarkowski">

		<meta name="apple-mobile-web-app-capable" content="yes" />
		<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />

		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">

		<link rel="stylesheet" href="css/reveal.css">
		<link rel="stylesheet" href="css/theme/sky.css" id="theme">

		<!-- Code syntax highlighting -->
		<link rel="stylesheet" href="lib/css/zenburn.css">

		<!-- Printing and PDF exports -->
		<script>
			var link = document.createElement( 'link' );
			link.rel = 'stylesheet';
			link.type = 'text/css';
			link.href = window.location.search.match( /print-pdf/gi ) ? 'css/print/pdf.css' : 'css/print/paper.css';
			document.getElementsByTagName( 'head' )[0].appendChild( link );
		</script>

		<!--[if lt IE 9]>
		<script src="lib/js/html5shiv.js"></script>
		<![endif]-->
	</head>

	<body>

		<div class="reveal">

			<!-- Any section element inside of this container is displayed as a slide -->
			<div class="slides">
				<section data-background="images/title_page.png">
					<h2>Just Enough Openstack for <b>Docker</b></h2>
					<aside class="notes">
					* Rule one of getting a CFP accepted is to mention "docker"<br>
					</aside>
				</section>

				<section data-background="images/slide_bg.png">
					<p>OpenStack is a large collection of complicated projects that join together to form a hard to deploy and harder to run distributed system.  This talk will show you how you can harness the concepts of bimodal IT to increase agility in your IT organization by utilizing a minimal Openstack install and various Docker based tools to build a platform that will increase developer productivity.</p>
					<aside class="notes">
					Rule two is to write a excerpt that doesn't really say anything meaningful
					</aside>
				</section>

				<section data-background="images/slide_bg.png">
					<p>Openstack is a large collection of complicated projects that join together to form a <b>hard to deploy</b> and <b>harder to run</b> <b>distributed system</b>.  This talk will show you how you can harness the concepts of <b>bimodal IT</b> to <b>increase agility in your IT organization</b> by utilizing a <b>minimal Openstack install</b> and various <b>Docker based tools</b> to <i>build a platform</i> that will <b>increase developer productivity.</b></p>
					<aside class="notes">
					that is little more than a set of loosely coupled buzzwords.
					</aside>
				</section>

				<section data-background="images/slide_bg.png">
					<h4>Just Enough Openstack for Docker</h4>
					<ul>
					  <li>Docker Docker Docker
					  <li>Hard to deploy
					  <li>Harder to run
					  <li>distributed system
					  <li>bimodal IT
					  <li>increase agility in your IT organization
					  <li>Minimal Openstack install
					  <li>Docker based tools
					  <li>build a platform
					  <li>increase developer productivity
					</ul>
					<aside class="notes">
					</aside>
				</section>

				<section data-background="images/slide_bg.png">
					<h4>Just Enough Openstack for Docker</h4>
					<ul>
					  <li>Bimodal IT
					  <li>Just Enough Openstack [for Docker]
					  <li>Docker on Openstack
					</ul>
					<aside class="notes">
					Once your CFP is accepted you can pretty much talk about anything you want.<br>
					In this case is these three main talking points which are sort of mentioned in the CFP, but it doesn't matter because nobody is quite sure what you promised to talk about.<br>
					Interestingly,  just about every concept I'm going to talk about has been mentioned at some point aready today.
					</aside>
				</section>

				<section data-background="images/slide_bg.png">
					<h3>Let's get to know eachother</h3>
					<img src="images/hello_paul.png" width="65%" height="65%">
					<aside class="notes">
					* But first,  let's take a moment to get to know eachother.<br>
					* my name is Paul Czarkowski, Infrastructure Engineer at Bluebox, recently acquired by ibm<br>
					* I worked in large enterprises for 10 years, left to work at startup, got bought by the original tech enterprise.<br>
					* I have been working with Openstack since Folsom and Docker since 0.3. <br>
					* I have spoken at both Openstack Summit and Dockercon.
					</aside>
				</section>

				<section data-background="images/slide_bg.png">
					<h3>Let's get to know eachother</h3>
					<img src="images/hello_audience.gif" width="65%" height="65%">
					<aside class="notes">
					* clearly I can't ask each of you to introduce yourself,  but I can run some audience participation...<br>
					* show of hands:  - work at enterprise - running openstack,  - running docker<br>
					* take a look around the room ... these are the people you should network with today.
					</aside>
				</section>

				<section data-background="images/slide_bg.png">
					<h2>Bimodal IT</h2>
					<img src="images/bimodalIT_cat_vs_dog.jpg" width="65%" height="65%">
					<aside class="notes">
					* I want to start off by talking about bimodal IT.<br>
					* believe it to be the most important thing I will talk about today.<br>
					* lack of bimodal IT is in my exp the most common failing at enterprises.<br>
					</aside>
				</section>

				<section>
					<h3>Traditional IT</h3>
					<img src="images/mode1.jpg">
					<h3>Pets</h3>
					<aside class="notes">
					* mode 1 is your legacy IT business.<br>
					* focus on providing reliability via business process.<br>
					* Waterfall, ITIL, Change Comittees, 12am maintenance windows.<br>
					* Exchange, Physical, Windows 2003, RHEL + Satellite.<br>
					* Ticket driven IT infrastructure.<br>
					* Focus on improving reliability of existing services.  VMWare!<br>
					* this is pets of the pets vs cattle analogy<br>
					</aside>
				</section>

				<section>
					<h3>Forward Thinking</h3>
					<img src="images/mode2.jpg">
					<h3>Cattle</h3>
					<aside class="notes">
					* mode 2 is your forward thinking IT business.<br>
					* Completely different org to that of Mode 1<br>
					* focus on reducing bottlenecks and delivering business value<br>
					* Scrum/Kanban, Devops, Infra as code, CI/CD, short feedback loops<br>
					* Google Apps, Slack, Cloud ( AWS, Azure, Openstack ), Containers, *AAS<br>
					* self service IT infrastructure<br>
					* this is the cattle of the pets vs cattle<br>
					</aside>
				</section>

				<section>
					<h3>Forward Thinking</h3>
					<img src="images/mode2.jpg">
					<h3>Cattle</h3>
					<aside class="notes">
					* without this second mode, your business will suffer greatly as your competitors go down this path<br>
					* symptoms of not doing bimodal IT include a 3 year "cloud" RFC/RFP process that end in vmware/hyperv<br>
					* if you do a RFP for cloud you've already failed.<br>
					* asking 'how can we do everything with this' when evaluating tech<br>
					* building a goal/metric of 'how many systems did you virtualize'<br>
					* having discussions that include: like P2V migrations, 1:1 virtualization, etc<br>
					</aside>
				</section>

				<section data-background="images/slide_bg.png">
					<img src="images/thegoal.jpg" width='200' height='300'><img src="images/phoenixproj.png">
					<aside class="notes">
					* not really increasing developer productivity,  we're reducing friction.<br>
					* 2nd mode of IT should borrow heavily from Lean practices,  Toyota Manufacturing, etc<br>
					* TOC is /very/ important here, read PP and the goal<br>
					</aside>
				</section>

				<section data-background="images/slide_bg.png">
					<img src="images/3ways.png" height="75%" width="75%">
					<br><small><a href="http://blog.docker.com/2015/05/docker-three-ways-devops/">Docker and the Three Ways of DevOps</a> by <a href="https://twitter.com/botchagalupe">John Willis</a></small>
					<aside class="notes">
					* three ways of devops<br>
					* done right, 2nd mode will drag 1st mode through these transformations<br>
					* 1st mode becomes cattle,  2nd mode becomes insect swarm.<br>
					* eventually the two modes will be almost indistinguishable from a process/tooling perspective<br>
					</aside>
				</section>

				<section data-background="images/slide_bg.png">
					<br><br><image src="images/cage_magic.jpg">
					<aside class="notes">
					* My summary here:  don't worry about legacy when you're making decisions for the future.<br>
					* Build seperate team for build/develop.  disturbingly large no of ppl will be happy to stay in mode1<br>
					* Our focus here at the openstack day should be on the 2nd mode of IT.<br>
					</aside>
				</section>

				<section data-background="images/slide_bg.png">
					<h2>Openstack is...</h2>
					<ul>
					  <li>Hard to Install
					  <li>Harder to Operate
					</ul>
					<aside class="notes">
					* with that out of the way,  let's talk about how terrible openstack is<br>
					* which OS, Which distro, packages vs source ?<br>
					* Hell even installing openstack cli clients can be hard<br>
				</aside>
				</section>

				<section data-background="images/slide_bg.png">
					<h3>Which Operating System ?</h3>
					<ul>
					  <li>Redhat -  RHEL, CentOS
					  <li>Debian -  Debian, <b>Ubuntu</b>
					</ul>
					<aside class="notes">
					* Before you can even start to install you need to choose an OS.<br>
					* Ubuntu is predominent OS in CI, Newer kernels etc.<br>
					* Support?   They'll take your money if you really want to pay them...<br>
					* when was last time you used and got value out of RHEL support ?<br>
				</aside>
				</section>

				<section data-background="images/slide_bg.png">
					<h3>Which Openstack distro ?</h3>
					<ul>
					  <li>OS native - <b>Ubuntu</b>, RHEL
					  <li>from <b>Source</b> ...  git://
					  <li>Helion, Mirantis, ...
					  <li><i>Roll your own packages</i>
					</ul>
					<p><small><a href="http://github.com/blueboxgroup/giftwrap">http://github.com/blueboxgroup/giftwrap</a></small>
					<aside class="notes">
					* You've chosen an OS ...  now choose an openstack "distro"<br>
					* Really two choices here for somebody new to openstack.  <br>
					* 1) use the distro packages<br>
					* 2) install from source ( its python, not complicated)<br>
				</aside>
				</section>

				<section data-background="images/slide_bg.png">
				<img src="images/openstack-arch-kilo-logical-v1.png">
				<br><small><a href="http://docs.openstack.org/admin-guide-cloud/content/logical-architecture.html">http://docs.openstack.org/admin-guide-cloud/content/logical-architecture.html</a></small>
					<aside class="notes">
					* Each "shape" in this diagram represents an openstack component and 100+ configurable options.  1000s!<br>
					* Openstack has no opinions, expects you to have them and provide them.<br>
					* Database - Mysql, <b>Percona+Galera</b>, Postgres,  ORACLE?!?!?!<br>
					* Queuing - <b>RabbitMQ</b>, ZeroMQ, QPID<br>
					* Network - <b>ml2</b>, OVS, <b>linux bridge</b>, VXLAN, VLAN, GRE, vendor<br>
					* Compute - <b>KVM</b>, Xen, HyperV, VMWare, Docker, LXC, etc<br>
					* Cinder - LVM, Gluster, NFS, NetApp, EMC<br>
				</aside>
				</section>

				<section data-background="images/slide_bg.png">
				<img src="images/openstack-arch-kilo-minimal.png">
					<aside class="notes">
					* If you're new to openstack/cloud lets not complicate things.  this is all you really need.<br>
					* MySQL and RabbitMQ ( don't even worry about replication / HA that can come later )<br>
					* Horizon, Keystone, Nova, Neutron, and Glance.<br>
					* Start with a single externally routed VLAN for your neutron network<br>
					* tricky stuff like SDN, Floating IPs, etc, later<br>
					* If you have a NetApp or decent NAS/SAN maybe add cinder after a few months<br>
				</aside>
				</section>

				<section data-background="images/slide_bg.png">
					<h3>Openstack Big Tent<br>Configuration Management</h3>
					<ul>
					<li><a href="https://github.com/openstack/openstack-chef-repo">https://github.com/openstack/openstack-chef-repo</a>
					<li><a href="https://github.com/stackforge/puppet-openstack">https://github.com/stackforge/puppet-openstack</a>
					<li><a href="https://github.com/stackforge/os-ansible-deployment">https://github.com/stackforge/os-ansible-deployment</a>
					<li><a href="https://github.com/stackforge/fuel-main">https://github.com/stackforge/fuel-main</a>
					</ul>
					<aside class="notes">
					* ofc, if want sane repeatable openstack, you'll use config management<br>
					* unless you roll your own, your choice here will probably dictate your OS choices.<br>
					* spoiler most are Ubuntu + System Packages<br>
					* are as unopinionated as openstack, therefore still need to make a lot of upfront decisions.
					</aside>
				</section>

				<section data-background="images/slide_bg.png">
					<h2>Ursula</h2>
					<ul>
					  <li><a href="http://github.com/blueboxgroup/ursula">http://github.com/blueboxgroup/ursula</a>
					  <li>Curated and opinionated
					  <li>Used to manage a <i>lot</i> of openstack clouds by a small team
					  <li>Feature flags to enable/disable optional items
					  <li>Kick the tires with <b>Vagrant</b>.
					  <li>~ 1200 ansible tasks to do a <i>simple</i> openstack install
					</ul>
					<aside class="notes">
					* bluebox's tooling for deploying and managing openstack clouds is called Urusla<br>
					* opensource and freely available on github.<br>
					* very opinionated and curated to be able to run a large number of medium size clouds by small team.<br>
					* We use a vagrant env for development, makes it easy to kick the tires.<br>
					* JEOD env ... still has 1200 tasks to install openstack!!!<br>
					</aside>
				</section>

				<section data-background="images/slide_bg.png">
					<h2>Shameless Plug</h2>
					<p>&lt;Bluebox Logo goes here&gt;
					<aside class="notes">
					<ul>
					  <li>For ~ $5k/mo Bluebox will host and manage your Private Cloud for you.<br>
					  <li>Avoid all the BS of running openstack, and spend your time learning how to consume.<br>
					</ul>
					</aside>
				</section>

				<section data-background="images/slide_bg.png">
					<img src="images/dockahdockahdockah.gif" height="85%" width="85%">
					<aside class="notes">
					</aside>
				</section>

				<section data-background="images/slide_bg.png">
					<h1>WTF is Docker ?</h1>
				  <p><a href="https://www.docker.com/whatisdocker/">https://www.docker.com/whatisdocker/</a>
					<aside class="notes">
    Process Isolation, chroot on steroids<br>
    Uses linux kernel tooling ( cgroups, namespaces, etc)<br>
    Shareable Immutable Artifacts - Images / Docker Hub<br>
    As much or as little of an OS in the image as you want.<br>
						* &lt; 1 sec startup time, have seen &lt; 10mb to &gt; gigs<br>
					</aside>
				</section>

				<section data-background="images/slide_bg.png">
					<h2>Docker vs VM</h2>
				  <image src="images/docker-vs-vm.png">
					<aside class="notes">
						* Docker = Containers ! Virt.  Can act like a VM<br>
						* security/isolation half way between chroot and VM<br>
						* Any OS capable of running docker can run your dockerized app... rhel vs deb<br>
						* layered filesystem means that containers can share common data.<br>
					</aside>
				</section>

				<section>
				  <h2>Dockerfile</h2>
					<pre class="stretch"><code data-trim>
# Base docker image
FROM paulczar/chrome

RUN apt-get install -y pepperflashplugin-nonfree \
    && rm -rf /var/lib/apt/lists/*

COPY local.conf /etc/fonts/local.conf


COPY . /slides

# Autorun chrome
ENTRYPOINT [ "/usr/bin/google-chrome-stable" ]
CMD [ "--user-data-dir=/data", "--no-sandbox", "file:///slides/index.html" ]
					</code></pre>
          <aside class="notes">
          * This is a dockerfile.<br>
          * instructions on how to create an docker image<br>
          * FROM, RUN, COPY, CMD
          </aside>
				</section>

				<section>
				  <h2>Docker Compose</h2>
					<pre class="stretch"><code data-trim>
nginx:
  build: .
  command: /app/bin/boot nginx
  volumes: [ .:/app ]
  links: [ mysql, hhvm ]
  ports: [ 8081:8080 ]
hhvm:
  build: .
  command: /app/bin/boot hhvm
  volumes: [ .:/app ]
  links: [ mysql ]
  ports: [ 9000 ]
mysql:
  image: orchardup/mysql
  ports: [ 3306:3306 ]
					</code></pre>
          <aside class="notes">
          * takes yml file and builds containers as described<br>
          * volume mount CWD into container<br>
          * just a few seconds to get app running assuming prebuilt.<br>
          * if I run boot without argument it runs both nginx and hhvm<br>
          * as you can see am using community image for mysql... aok.
          </aside>
				</section>

				<section data-background="images/slide_bg.png">
				<h3>Factorish</h3>
				<p><small>http://factorish.github.io/factorish/#/</small></p>
				<ul>
					<li>Run legacy apps in a container
					<li>Make the container 12 factor, not the app
					<li>Demo apps from simple python to full ELK stack
					<ul>
					  <li>http://github.com/factorish/factorish
					  <li>http://github.com/factorish/factorish-elk
					</ul>
				</ul>
					<aside class="notes">
          * Toolset I developed for making legacy style apps run in a docker container<br>
          * ties together tooling to help with config templating, process management, service discovery and more<br>
          * examples from basic python app to full ELK stack with SD, auto-clustering mysql/galera.<br>
					</aside>
				</section>

				<section data-background="images/slide_bg.png">
					<h3>Openstack Images for Docker</h3>
					<ul>
					  <li><b>Ubuntu Trusty</b> / Fedora
					  <li><b>CoreOS</b> / RancherOS
					  <li>Atomic / Snappy
					</ul>
					<aside class="notes">
					</aside>
				</section>

				<section data-background="images/slide_bg.png">
					<h3>How to Docker with Openstack ?</h3>
						<ul>
						 <li>Just plain old Docker.
						 <li>Docker Machine
						 <li>Deis
						 <li>CoreOS + Fleet
						 <li>Kubernetes
						 <li>Rancher Labs
					<aside class="notes">
					* Going to talk through a bunch of ways to docker on openstack<br>
					</aside>
				</section>

				<section data-background="images/slide_bg.png">
					<h3>Docker Machine</h3>
					<p><a href="https://github.com/docker/machine/releases">https://github.com/docker/machine/releases</a></p>
					<aside class="notes">
					* you could just spin up an instance and ssh in and use docker, or just expose the docker port<br>
					* but Docker machine makes that a little easier and more secure.<br>
					* docker machine will spin up a new server, install docker, and set up a client/server key/pair.<br>
					* it reads your openrc style environment variables, but still requires a bunch of settings<br>
					* hide them behind an alias or a script or something.<br>
					</aside>
				</section>


				<section data-background="images/slide_bg.png">
					<h3>Docker Machine</h3>
<pre><code>
$ docker-machine create -d openstack \
  --openstack-image-id 1525c3f3-1224-4958-bd07-da9feaedf18b \
  --openstack-flavor-id 2  --openstack-net-id ba0fdd03-72b5-41eb-bb67-fef437fd6cb4 \
  --openstack-floatingip-pool external \
  --openstack-ssh-user ubuntu --openstack-sec-groups docker \
    testenv
Creating machine...
To see how to connect Docker to this machine, run: docker-machine env testenv
$
</code></pre>
					<aside class="notes">
					* in this case the image is ubuntu trusty and I have both an internal network and a floating ip pool.<br>
					* you can see I also need to specify the ssh user and a security group.<br>
					* sec-group should allow ssh and the docker port, I also added the ephemeral docker port range.<br>
					</aside>
				</section>

				<section data-background="images/slide_bg.png">
					<h3>Docker Machine</h3>
<pre><code>
$ docker-machine env testenv
export DOCKER_TLS_VERIFY="1"
export DOCKER_HOST="tcp://x.x.x.x:2376"
export DOCKER_CERT_PATH="/home/pczarkowski/.docker/machine/machines/testenv"
export DOCKER_MACHINE_NAME="testenv"
$ eval "$(docker-machine env testenv)"
$ docker ps
CONTAINER ID        IMAGE               COMMAND             CREATED             STATUS
</code></pre>
					<aside class="notes">
					*  after docker machine succesfully runs I can get the env vars to pass to docker like this<br>
					* pass it through eval and you have everything you need to securely connect to your docker machine.<br>
					</aside>
				</section>

				<section data-background="images/slide_bg.png">
					<h3>Docker Machine</h3>
<pre><code>
$ docker run -p 80 --name nginx -d nginx
$ docker inspect nginx| grep HostPort
                    "HostPort": "32769"
$ curl x.x.x.x:32769
...
...
<title>Welcome to nginx!</title>

</code></pre>
					<aside class="notes">
					* now we can run any randome docker command<br>
					* and it will be run in the docker-machine rather than locally<br>
					* for example nginx,  hostport,  curl<br>
					</aside>
				</section>

				<section data-background="images/slide_bg.png">
					<h3>Docker Machine</h3>
					<ul>
					  <li>Supports Docker-Swarm
					  <li>Support Docker-Compose
					  <li>No host volumes
					  <li>Good for test/staging/demo
					  <li>Not great for dev
					</ul>
					<aside class="notes">
					* docker swarm for docker based orchestration (NEW)<br>
					* docker compose can talk to docker machines<br>
					* some features are not usable on some clouds,  volume mounts not on most<br>
					* this means it can be good for test and demo, but not great for dev.<br>
					</aside>
				</section>

				<section data-background="images/slide_bg.png">
					<h2>DEIS</h2>
					<ul>
					  <li>Most mature Opensource [docker] PAAS*
					  <li>Heroku inspired workflow
					  <li>distributed stateless applications
					  <li>seperation of responsibilities
					  <li>Solid docs for running on Openstack
					</ul>
					<aside class="notes">
					* arguably deis is most mature and functional opensource docker based PAAS<br>
					* has heroku style workflow ( and others ).  UX first,chef->docker<br>
					* is a stateless distribute app itself<br>
					* ops manage deis and underlying infra, devs/devops manage apps in deis.<br>
					* ops/DBAs/etc manage databases and state external to DEIS
					* docs for running on openstack are solid<br>
					</aside>
				</section>

				<section data-background="images/slide_bg.png">
					<h2>DEIS</h2>
<pre><code>
$ git clone https://github.com/deis/example-ruby-sinatra.git
$ cd example-ruby-sinatra
$ deis create && git push deis master
Creating application... done, created nimbus-insignia
Git remote deis added
...
-----> Launching...
       done, nimbus-insignia:v2 deployed to Deis
       http://nimbus-insignia.x.x.x.x.xip.io

$ curl http://nimbus-insignia.x.x.x.x.xip.io
Powered by Deis!
Running on container ID 88384adc62d4

</code></pre>
					<aside class="notes">
					* example of running application in deis<br>
					* was going to live demo, but we're doing this on shared laptop<br>
					* deis create sees we're in a git repo and sets up a remote repo to deis git server<br>
					* post-commit hooks builds and runs application<br>
					* deis uses wildcard dns to route to applications.  xip is great for demo with this.<br>
					</aside>
				</section>

				<section data-background="images/slide_bg.png">
					<h2>DEIS</h2>
<pre><code>
$ deis config:set POWERED_BY=openstack
Creating config... done, v3

=== nimbus-insignia
DEIS_APP: nimbus-insignia
POWERED_BY: openstack

$ curl http://nimbus-insignia.x.x.x.x.xip.io
Powered by openstack
Running on container ID 6440f619dcfc
</code></pre>
					<aside class="notes">
					* deis has a bunch of commands to deal with your running app<br>
					* for example we can change a config setting for our app ( which is done via docker envs)<br>
					* deis will rebuild the final layer of your app container which contains the config<br>
					* it will then mark it as a versioned release and push to docker registry<br>
					* a new contaner will then be spun up and added to LB, then old spun down<br>
					* rollback to previous release is easy and quick<br>
					* explain example<br>
					</aside>
				</section>

				<section data-background="images/slide_bg.png">
					<h2>DEIS</h2>
<pre><code>
$ deis scale web=3
Scaling processes... but first, coffee!
...
$ curl http://nimbus-insignia.173.247.105.17.xip.io
Running on container ID 6440f619dcfc
$ curl http://nimbus-insignia.173.247.105.17.xip.io
Running on container ID cbcf905b8b34
$ curl http://nimbus-insignia.173.247.105.17.xip.io
Running on container ID 676cb76cb562
</code></pre>
					<aside class="notes">
					* adding more or less containers to your app is easy,  simply run deis scale<br>
					* scales your number of containers to the number specified.<br>
					* easy to tie this into a cron style job for seasonal traffic patterns, can tie to monitoring for auto-scale<br>
					* can see here it scaled to three, and I can curl and get 3 different container IDs.
					</aside>
				</section>

				<section data-background="images/slide_bg.png">
					<h3>CoreOS + Fleet</h3>
					<ul>
					  <li>CoreOS - minimal OS for running Containers
					  <li>etcd - distrubuted Key/Value store
					  <li>flannel - network overlay
					  <li>fleet - Container Orchestration
					  <li>fleet takes systemd units with special section
					  <li>We actually just saw it in action with DEIS
					</ul>
					<aside class="notes">
					* DEIS uses coreos with fleet to deploy and orchestrate itself.<br>
					* fleet combines with etcd for container orchestration.<br>
					* you pass it systemd units with an extra section for fleet metadata<br>
					* schedules across a coreos cluster, one host dies, restarts on another<br>
					* affinity, anti-affinity, counts, etc.<br>
					* great for building a platform ( like deis ) on top of<br>
					</aside>
				</section>

				<section data-background="images/slide_bg.png">
					<h3>CoreOS + Fleet</h3>
<pre><code>
[Unit]
Description=deis-router

[Service]
EnvironmentFile=/etc/environment
ExecStartPre=/bin/sh -c "IMAGE=`/run/deis/bin/get_image /deis/router` && docker history $IMAGE >/dev/null 2>&1 || docker pull $IMAGE"
ExecStartPre=/bin/sh -c "docker inspect deis-router >/dev/null 2>&1 && docker rm -f deis-router || true"
ExecStart=/bin/sh -c "IMAGE=`/run/deis/bin/get_image /deis/router` && docker run --name deis-router --rm -p 80:80 -p 2222:2222 -p 443:443 -e EXTERNAL_PORT=80 -e HOST=$COREOS_PRIVATE_IPV4 $IMAGE"
ExecStopPost=-/usr/bin/docker rm -f deis-router

[Install]
WantedBy=multi-user.target

[X-Fleet]
Conflicts=deis-router@*.service
</code></pre>
					<aside class="notes">
					* this is example of fleet unit, pretty easy to understand and parse<br>
					* surprisingly easy to set up affinity and boot order roles<br>
					* can use affinity and boot order to ensure a containers volume container starts before it for stateful apps.
					</aside>
				</section>

				<section data-background="images/slide_bg.png">
					<h3>Kubernetes</h3>
					<ul>
					  <li>Came from Google...but is <i>not</i> Google.
					  <li>IAAS but for containers.
					  <li>You still need to tell it what to run and where.
					  <li>Magnum!
					</ul>
					<aside class="notes">
					* not a PAAS, but rather something you would build a platform on top of<br>
					* Kubernetes is to containers what openstack is to VMs.<br>
					* very opsy interface for deploying/running containers<br>
					* is building a platform your core compentency?  If not wait until somebody does it for you<br>
					* if K8s, then think about Magnum.  Requires Heat.
					</aside>
				</section>

				<section data-background="images/slide_bg.png">
					<h3>Docker Registry</h3>
					<ul>
					  <li>Use private repos on Docker Hub ( $$$ )
					  <li>run Docker Registry locally ( OS )
					  <li>run Docker Trusted Registry ( $$$ )
					  <li>run CoreOS Enterprise Registry ( $$$ )
					</ul>
					<aside class="notes">
					* If doing much with docker will probably need private registry.<br>
					* can pay docker for private repos on SAAS registry.<br>
					* run opensource docker registry locally ( deis runs one for you ), can be backed by swift?<br>
					* if backing with swift/s3/etc can run on every machine, localhost, no security.<br>
					* Run either DTR or CoreOS ER....  pay money ... get support ?<br>
					</aside>
				</section>

				<section data-background="images/slide_bg.png">
					<h3>Docker Workflow #1</h3>
					<ul>
					  <li>Development on laptop (docker-compose)
					  <li>Testing/QA on "Cloud" ( docker-compose + docker-machine )
					  <li>Jenkins to build docker image, store in registry.
					  <li>Staging / Production on "Cloud" ( Ansible or Chef )
					</ul>
					<aside class="notes">
					* Develop locally on your laptop, use docker-compose<br>
					* Deploy Testing / QA envs to Openstack using machine  + compose<br>
					* on commit to "deploy" branch kick of jenkins build of image, version, push to registry<br>
					* Deploy to Stage/Production using existing CM tools with docker integration<br>
					* this good, because probably already using CM to manage existing infra, stateful dbs, etc<br>
					</aside>
				</section>

				<section data-background="images/slide_bg.png">
					<h3>Docker Workflow #2</h3>
					<ul>
					  <li>Development on laptop (docker-compose)
					  <li>Create PR on github
					  <li>Jenkins runs unit tests on PR ( in docker )
					  <li>Jenkins deploys test app of PR ( in DEIS )
					  <li>Jenkins/Human performs Integration tests against PR
					  <li>Jenkins/Human merges PR to master
					  <li>Jenkins deploys Staging App ( in DEIS )
					  <li>Human approves and cuts release in Github
					  <li>Jenkins deploys Prod App ( in DEIS )
					</ul>
					<aside class="notes">
					* A more advanced workflow using DEIS.<br>
					* All steps beyond creating the PR can be automated<br>
					* Path to full CI/CD ( if that's your bag )<br>
					</aside>
				</section>

				<section data-background="images/slide_bg.png">
				<h2>Finish</h2>
				<img src="images/finish.jpg">
				<h3>Questions?</h3>
				</section>


			</div>

		</div>

		<script src="lib/js/head.min.js"></script>
		<script src="js/reveal.js"></script>

		<script>

			// Full list of configuration options available at:
			// https://github.com/hakimel/reveal.js#configuration
			Reveal.initialize({
				controls: true,
				progress: true,
				history: true,
				center: true,

				transition: 'slide', // none/fade/slide/convex/concave/zoom

				// Optional reveal.js plugins
				dependencies: [
					{ src: 'lib/js/classList.js', condition: function() { return !document.body.classList; } },
					{ src: 'plugin/markdown/marked.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
					{ src: 'plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
					{ src: 'plugin/highlight/highlight.js', async: true, condition: function() { return !!document.querySelector( 'pre code' ); }, callback: function() { hljs.initHighlightingOnLoad(); } },
					{ src: 'plugin/zoom-js/zoom.js', async: true },
					{ src: 'plugin/notes/notes.js', async: true }
				]
			});

		</script>

	</body>
</html>
